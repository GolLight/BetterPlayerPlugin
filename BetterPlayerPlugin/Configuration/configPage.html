<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Better Player 插件配置</title>
</head>
<body>
    <div id="BetterPlayerConfigPage" data-role="page" class="page type-interior pluginConfigurationPage" 
         data-require="emby-input,emby-button">
        <div data-role="content">
            <div class="content-primary">
                <form id="BetterPlayerConfigForm">
                    
                    <!-- -------------------------------------------------------- -->
                    <!-- 自定义脚本 URL (CustomScriptUrl) - 暂时注释，敬请期待 -->
                    <!--
                    <div class="inputContainer">
                        <label class="inputLabel inputLabelUnfocused" for="CustomScriptUrl">自定义脚本 URL (可选)</label>
                        <input id="CustomScriptUrl" name="CustomScriptUrl" type="url" is="emby-input" placeholder="例如：https://my.domain.com/custom.js" />
                        <div class="fieldDescription">如果您想使用外部脚本，请在此处填写完整的 URL。留空则使用内置脚本。</div>
                    </div>
                    -->
                    <div class="config-placeholder">
                        <p class="sectionTitle">自定义脚本 URL：敬请期待</p>
                        <div class="fieldDescription">该功能将在后续版本中启用，敬请关注插件更新。</div>
                    </div>
                    <!-- -------------------------------------------------------- -->
                    
                    <div style="margin-top: 30px;">
                        <button is="emby-button" type="submit" class="raised button-submit block emby-button">
                            <span>保存</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <script type="text/javascript">
            var BetterPlayerConfig = {
                // 您的插件的实际 GUID
                pluginUniqueId: 'b5eaeb4a-57d9-4703-9e63-2c2ad6a7fc67' 
            };

            // 加载配置
            document.querySelector('#BetterPlayerConfigPage')
                .addEventListener('pageshow', function() {
                    Dashboard.showLoadingMsg();
                    ApiClient.getPluginConfiguration(BetterPlayerConfig.pluginUniqueId).then(function (config) {
                        // 适配：CustomScriptUrl 已被注释，不再加载
                        // document.querySelector('#CustomScriptUrl').value = config.CustomScriptUrl;
                        
                        Dashboard.hideLoadingMsg();
                    });
                });

            // 保存配置
            document.querySelector('#BetterPlayerConfigForm')
                .addEventListener('submit', function(e) {
                Dashboard.showLoadingMsg();
                ApiClient.getPluginConfiguration(BetterPlayerConfig.pluginUniqueId).then(function (config) {
                    // 适配：CustomScriptUrl 已被注释，不再读取
                    // config.CustomScriptUrl = document.querySelector('#CustomScriptUrl').value;
                    
                    ApiClient.updatePluginConfiguration(BetterPlayerConfig.pluginUniqueId, config).then(function (result) {
                        Dashboard.processPluginConfigurationUpdateResult(result);
                    });
                });

                e.preventDefault();
                return false;
            });
        </script>
        <!-- 基础样式，使其看起来更像 Jellyfin/Emby 插件页面 -->
        <style>
            /* 整体深色背景和浅色文字 */
            body, .page {
                background-color: #1a1a1a !important; /* 深灰色背景 */
                color: #e0e0e0 !important; /* 浅灰色文字 */
            }

            /* 主要内容区域 */
            .content-primary {
                max-width: 700px;
                margin: 0 auto;
                padding: 20px;
            }
            
            /* 标题颜色 */
            .page-title {
                color: #ffffff;
            }

            /* 占位符容器 - 突出显示 '敬请期待' */
            .config-placeholder {
                margin: 30px 0;
                padding: 30px;
                background-color: #242424; /* 略浅的深灰色 */
                border: 1px solid #333;
                border-radius: 8px; /* 柔和圆角 */
                text-align: center;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                transition: transform 0.2s;
            }
            .config-placeholder:hover {
                transform: translateY(-2px); /* 轻微悬停效果 */
            }

            /* 占位符标题 */
            .sectionTitle {
                font-size: 1.4em;
                font-weight: 700;
                color: #8c8c8c; /* 略微柔和的文字颜色 */
                margin-bottom: 10px;
                letter-spacing: 1px;
            }

            /* 描述文字 */
            .fieldDescription {
                color: #a0a0a0;
                font-size: 0.95em;
                line-height: 1.4;
                margin-top: 10px;
            }

            /* 保存按钮 - 现代深色风格 */
            .button-submit.raised {
                background: linear-gradient(45deg, #7c4dff, #64ffda); /* 渐变色 */
                color: #1a1a1a; /* 确保文字是深色 */
                font-weight: bold;
                border: none;
                border-radius: 20px; /* 药丸形状 */
                padding: 12px 30px;
                box-shadow: 0 4px 10px rgba(124, 77, 255, 0.4);
                transition: all 0.3s ease;
            }
            .button-submit.raised:hover {
                background: linear-gradient(45deg, #64ffda, #7c4dff);
                box-shadow: 0 6px 15px rgba(100, 255, 218, 0.5);
                opacity: 0.9;
            }

        </style>
    </div>
</body>
</html>
